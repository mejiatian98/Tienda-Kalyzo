{% load static %}
<nav class="navbar navbar-1 bg-primary" data-bs-theme="dark">
  <div class="container d-flex justify-content-between align-items-center px-3 py-2">

    <a class="navbar-nav nav-link d-flex align-items-center text-center"
   href="{% url 'store_page' %}">
    <i class="bi bi-house fs-4 btn-house"></i>
    </a>


    <a href="{% url 'store_page' %}" class="no-link-style brand-link">
    <span class="brand-text-animated">
        <span>K</span>
        <span>A</span>
        <span>L</span>
        <span>Y</span>
        <span>Z</span>
        <span>O</span>
    </span>
</a>



    <!-- ICONOS -->
    <ul class="navbar-nav d-flex flex-row align-items-center gap-3">

      <!-- LOGIN (abre offcanvas derecha) -->
      <li class="nav-item">
        <a class="nav-link"
           data-bs-toggle="offcanvas"
           data-bs-target="#loginOffcanvas">

          <!-- Comentado el icono de login temporalmente -->
          <!-- <i class="bi bi-person-circle fs-4"></i> -->
        </a>
      </li>

      <!-- BUSCAR (abre offcanvas top) -->
      <li class="nav-item">
        <a class="nav-link" 
           data-bs-toggle="offcanvas" 
           data-bs-target="#buscarOffcanvas">
          <i class="bi bi-search fs-4"></i>
        </a>
      </li>

      <!-- CARRITO (abre offcanvas derecha) -->
      <li class="nav-item position-relative">
          <a class="nav-link position-relative" 
            data-bs-toggle="offcanvas" 
            data-bs-target="#carritoOffcanvas"
            style="cursor: pointer;">
              <i class="bi bi-cart3 fs-4"></i>
              <span id="cartCounter" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger d-none">
                  0
              </span>
          </a>
      </li>

    </ul>

  </div>
</nav>

<script>
// Cargar el contador del carrito al cargar la pÃ¡gina
document.addEventListener('DOMContentLoaded', function() {
    fetch('/orders/carrito/count/')
        .then(response => response.json())
        .then(data => {
            const cartCounter = document.getElementById('cartCounter');
            if (cartCounter && data.cart_count > 0) {
                cartCounter.textContent = data.cart_count;
                cartCounter.classList.remove('d-none');
            }
        });
});
</script>


<!-- OFFCANVAS BUSCAR -->
{% include 'app_store/componentes/subcomponentes/Buscador_offcanvas.html' %}

<!-- OFFCANVAS CARRITO -->
{% include 'app_orders/componentes/Carrito_offcanvas.html' %}