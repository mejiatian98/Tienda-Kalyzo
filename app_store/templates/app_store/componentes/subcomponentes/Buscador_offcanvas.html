{% load static %}

<!-- OFFCANVAS BUSCAR -->
<div class="offcanvas offcanvas-top" tabindex="-1" id="buscarOffcanvas">
  
  <!-- HEADER -->
  <div class="offcanvas-header border-bottom">
    <h5 class="offcanvas-title d-flex align-items-center">
      <i class="bi bi-search me-2"></i>
      Buscar productos
    </h5>
    <button class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>

  <!-- BODY -->
  <div class="offcanvas-body">

    <!-- BARRA DE BÚSQUEDA -->
    <form method="GET" action="{% url 'search_products' %}">
      <div class="input-group mb-4">

        

        <!-- Campo de texto -->
        <input 
          type="text" 
          name="q" 
          class="form-control"
          placeholder="Buscar productos, categorías..."
        >

        <!-- BOTÓN PARA BUSCAR -->
        <button class="btn btn-primary" type="submit">
          <i class="bi bi-search"></i> Buscar
        </button>

      </div>
    </form>
    
    <div class="offcanvas-body">
      <!-- CATEGORÍAS -->
      <h6 class="text-muted mb-3 mt-3">Categorías disponibles</h6>

      <div class="list-group shadow-sm rounded">

        {% for categoria in categorias %}
        <a href="{% url 'category_specific_products' categoria.slug categoria.id %}"
          class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">

          <!-- NOMBRE + DESCRIPCIÓN -->
          <div class="d-flex flex-column">
            <span class="fw-semibold">{{ categoria.name }}</span>

            {% if categoria.description %}
            <small class="text-muted">{{ categoria.description}}</small>
            {% endif %}
          </div>

          <!-- CONTADOR -->
          <span class="badge bg-primary rounded-pill">
            {{ categoria.products.count }}
          </span>

        </a>
        {% empty %}
            <p class="text-muted">No hay productos</p>
        {% endfor %}

      </div>
    </div>
  </div>
</div>
