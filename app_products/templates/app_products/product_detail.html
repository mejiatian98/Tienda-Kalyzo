{% extends 'Store_page.html' %}
{% load static %}
{% load moneda %}
{% load math_filters %}

{% block title %} {{ product.name }} {% endblock %}

{% block content %}

<!-- ================= BREADCRUMB ================= -->
{% include 'app_store/componentes/Breadcrumb.html' %}


<!-- ================= CONTENEDOR PRINCIPAL ================= -->
<div class="row product-detail-row">

    <!-- ======================================================
        COLUMNA IZQUIERDA
        Imágenes + descripción + specs + comentarios
    ======================================================= -->
    <div class="col-lg-7 mb-4">
        

        <!-- ================= CAJA PRODUCTO ================= -->
        <div class="product-box p-4 rounded shadow-sm">
            

            {% if images %}
            <div class="product-images d-flex flex-column flex-md-row">
                

                <!-- IMAGEN PRINCIPAL -->
                <div class="main-image flex-grow-1 text-center">
                    <img 
                        id="mainProductImage"
                        src="{{ images.0.image_url }}"
                        alt="{{ images.0.alt_text }}"
                        class="main-product-image"
                    >
                </div>

                <!-- MINIATURAS -->
                <div id="thumbnailContainer" class="thumbnail-column me-md-3 mb-3 mb-md-0">
                    {% for img in images %}
                    <img 
                        src="{{ img.image_url }}"
                        alt="{{ img.alt_text }}"
                        class="product-thumb"
                        onclick="changeMainImage('{{ img.image_url }}', '{{ img.alt_text }}')"
                    >
                    {% endfor %}
                    
                </div>

            </div>
            {% else %}
                <p class="text-muted">No hay imágenes disponibles.</p>
            {% endif %}

            <hr class="hr-separador">


            <!-- ================= DESCRIPCIÓN ================= -->
            <div class="product-description mb-4">
                {{ product.description_short|safe }}
            </div>

        </div>

        <div>
            <!-- ================= ESPECIFICACIONES ================= -->
            <div class="mt-4">
                {% include 'app_products/componentes/Product_Specifications.html' %}
            </div>
            

            <!-- ================= COMENTARIOS ================= -->
            <div class="mt-4">
                {% include 'app_products/componentes/Comments.html' %}
            </div>
        </div>
    </div>


    <!-- ======================================================
        COLUMNA DERECHA (STICKY)
        Variantes / compra
    ======================================================= -->
    <div class="col-lg-5 mb-4">

        <div class="sidebar-sticky product-box p-4 rounded shadow-sm">
            {% include 'app_products/componentes/Variant_Right.html' %}
        </div>
        
    </div>
</div>

<!-- ================= PRODUCTOS SIMILARES ================= -->
<hr class="separator my-5">

{% include 'app_products/componentes/Similar_Products.html' %}

{% endblock %}
